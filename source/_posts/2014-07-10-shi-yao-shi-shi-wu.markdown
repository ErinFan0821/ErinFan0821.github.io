---
layout: post
title: "什么是事务"
date: 2014-07-10 20:26:39 +0800
comments: true
categories: 
---
   前段时间项目里面使用到jms，看完了jms相关的东西之后，发现transactionManager这一块怎么都理解不了，才觉得是不是自己没有理解到什么是事务，为什么要使用事务，网上查了一些资料，然后理解了一下，写这篇博客权当记录。
   事务是一个操作系列，意思也就是在这个事务定义范围内的操作，要么都执行，要么都不执行，就是一个元子单位，不可分割。
   举个最简单的例子， 你去银行存钱，有下面几个步骤： 1.把钱交给柜台服务小姐  2. 柜台服务小姐帮你填单子 3. 柜台服务小姐把单子给你签字 4. 柜台服务小姐确认并输入电脑。 万一在你执行到第三步的时候，柜台服务小姐看到你账户上面金额太多，一时激动，心脏病发over了，哦豁，你的钱还没有输入电脑，但你的钱已经交给了柜台并且你自己已经签字确认了，这个时候没有其他的记录，你的这么多钱不就打水漂了，你甘心不？所以，事务（transaction） 这个术语就诞生了，也就是要么成功，要么失败且恢复原状，不会出现例子中描述的到一半没法继续了的情况，也就是说在这个例子中最后的结果是存钱没有成功，钱会退还给你。
   事务具有什么样的一些属性呢？简称ACID
   Atomicity 原子性： 一个事务是一个不可分割的工作单位，事务中包括的诸多操作要么都做，要么都不做。
   Consistency 一致性： 事务必须是从一个一致性的状态编导另外一个一致性的状态，这个与原子性有密切关系
   Isolation 隔离性： 一个事物的执行不能被其他事务干扰。即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。
   Durability 持久性： 指一个事务一旦提交，他的操作是不可逆的，改变了就是改变了，永久性的，接下来的其他操作或者故障对这个改变是没有任何影响的。
   
